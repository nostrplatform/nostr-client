import{g as u,p as h,f as v,j as s,I as x,B as c}from"./index-BETSscnm.js";import{r as d}from"./react-stuff-BXf_FtOc.js";import"./nostr-dev-kit-Ci8rOtvv.js";import{P as f}from"./plus-DI96IQY0.js";import"./zustand-B-hWnPoZ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=u("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),S=()=>{const{toast:a}=h(),{ndk:t}=v(),[r,l]=d.useState(""),[i,o]=d.useState(()=>{const e=localStorage.getItem("nostr-relays");return e?JSON.parse(e):["wss://nos.lol","wss://relay.primal.net","wss://relay.nostr.band","wss://discovery-eu.nostria.app"]}),p=()=>{if(!r.startsWith("wss://")){a({title:"Invalid relay URL",description:"Relay URL must start with wss://",variant:"destructive"});return}if(i.includes(r)){a({title:"Relay already exists",description:"This relay is already in the list",variant:"destructive"});return}const e=[...i,r];o(e),localStorage.setItem("nostr-relays",JSON.stringify(e)),l(""),t==null||t.connect(),a({title:"Relay added",description:"The relay has been added successfully"})},y=e=>{if(e==="wss://discovery-eu.nostria.app"){a({title:"Cannot remove this relay",description:"The discovery relay is required for the application",variant:"destructive"});return}const n=i.filter(m=>m!==e);o(n),localStorage.setItem("nostr-relays",JSON.stringify(n)),t==null||t.connect(),a({title:"Relay removed",description:"The relay has been removed successfully"})};return s.jsxs("div",{className:"p-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manage Relays"}),s.jsxs("div",{className:"flex gap-2 mb-6",children:[s.jsx(x,{placeholder:"wss://relay.example.com",value:r,onChange:e=>l(e.target.value)}),s.jsxs(c,{onClick:p,children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"Add Relay"]})]}),"      ",s.jsx("div",{className:"space-y-2",children:i.map(e=>s.jsxs("div",{className:`flex items-center justify-between p-3 border rounded ${e==="wss://discovery-eu.nostria.app"?"border-primary":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:e}),e==="wss://discovery-eu.nostria.app"&&s.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Discovery Relay"})]}),s.jsx(c,{variant:"ghost",size:"sm",onClick:()=>y(e),className:e==="wss://discovery-eu.nostria.app"?"opacity-50":"",children:s.jsx(w,{className:"w-4 h-4"})})]},e))})]})};export{S as RelaysPage};

import{g as ms,a5 as Le,af as gs,j as e,a7 as hs,a8 as qe,aa as fs,ag as xs,n as me,T as Oe,P as $e,Q as O,V as $,B as A,I as _,f as vs,u as bs,p as js,E as Se,a2 as ys,F as Ce,X as Be,Y as ke,ah as De,L as F,a3 as Ie,_ as ne,C as re,t as oe,v as le,ai as de,w as ce,A as ws,l as Ns,m as Es,r as Te,S as Ss}from"./index-BETSscnm.js";import{e as M,l as ue,d as pe,n as Cs}from"./nostr-dev-kit-Ci8rOtvv.js";import{r as i}from"./react-stuff-BXf_FtOc.js";import{H as Ae,a as Pe,b as Bs,B as Re,p as ks}from"./utils-DgAN6Aru.js";import{T as Ds}from"./textarea-Wl9G6xb5.js";import{B as Me}from"./skeleton-CMxO_lKE.js";import{T as _e,X as ze}from"./x-QsXYDViR.js";import{P as ge}from"./plus-DI96IQY0.js";import"./zustand-B-hWnPoZ.js";import"./index-B2SqHZ3w.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=ms("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function Ts(a){const m=i.useRef({value:a,previous:a});return i.useMemo(()=>(m.current.value!==a&&(m.current.previous=m.current.value,m.current.value=a),m.current.previous),[a])}var G="Switch",[As,Ws]=hs(G),[Ps,Rs]=As(G),Ve=i.forwardRef((a,m)=>{const{__scopeSwitch:l,name:C,checked:h,defaultChecked:E,required:p,disabled:B,value:k="on",onCheckedChange:P,form:y,...f}=a,[w,D]=i.useState(null),R=Le(m,v=>D(v)),I=i.useRef(!1),z=w?y||!!w.closest("form"):!0,[T,o]=gs({prop:h,defaultProp:E??!1,onChange:P,caller:G});return e.jsxs(Ps,{scope:l,checked:T,disabled:B,children:[e.jsx(qe.button,{type:"button",role:"switch","aria-checked":T,"aria-required":p,"data-state":Ye(T),"data-disabled":B?"":void 0,disabled:B,value:k,...f,ref:R,onClick:fs(a.onClick,v=>{o(H=>!H),z&&(I.current=v.isPropagationStopped(),I.current||v.stopPropagation())})}),z&&e.jsx(Ke,{control:w,bubbles:!I.current,name:C,value:k,checked:T,required:p,disabled:B,form:y,style:{transform:"translateX(-100%)"}})]})});Ve.displayName=G;var Ue="SwitchThumb",Ge=i.forwardRef((a,m)=>{const{__scopeSwitch:l,...C}=a,h=Rs(Ue,l);return e.jsx(qe.span,{"data-state":Ye(h.checked),"data-disabled":h.disabled?"":void 0,...C,ref:m})});Ge.displayName=Ue;var Ms="SwitchBubbleInput",Ke=i.forwardRef(({__scopeSwitch:a,control:m,checked:l,bubbles:C=!0,...h},E)=>{const p=i.useRef(null),B=Le(p,E),k=Ts(l),P=xs(m);return i.useEffect(()=>{const y=p.current;if(!y)return;const f=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(f,"checked").set;if(k!==l&&D){const R=new Event("click",{bubbles:C});D.call(y,l),y.dispatchEvent(R)}},[k,l,C]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...h,tabIndex:-1,ref:B,style:{...h.style,...P,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ke.displayName=Ms;function Ye(a){return a?"checked":"unchecked"}var We=Ve,_s=Ge;const Xe=i.forwardRef(({className:a,...m},l)=>e.jsx(We,{className:me("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...m,ref:l,children:e.jsx(_s,{className:me("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Xe.displayName=We.displayName;const zs=({tags:a,onChange:m,hashtags:l=[],onHashtagsChange:C=()=>{}})=>{const[h,E]=i.useState(""),[p,B]=i.useState(""),[k,P]=i.useState(""),[y,f]=i.useState(null),[w,D]=i.useState("tags"),R=()=>{if(!h.trim()){f("Tag name is required");return}if(!p.trim()){f("Tag value is required");return}if(a.some(o=>o.name===h.trim())){f(`Tag with name "${h}" already exists`);return}m([...a,{name:h.trim(),value:p.trim()}]),E(""),B(""),f(null)},I=o=>{m(a.filter(v=>v.name!==o.name))},z=()=>{if(!k.trim()){f("Hashtag is required");return}let o=k.trim();if(o.startsWith("#")&&(o=o.substring(1)),o===""){f("Hashtag cannot be empty");return}if(l.includes(o)){f(`Hashtag "#${o}" already exists`);return}C([...l,o]),P(""),f(null)},T=o=>{C(l.filter(v=>v!==o))};return e.jsx("div",{className:"space-y-3",children:e.jsxs(Oe,{value:w,onValueChange:o=>{D(o),f(null)},className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs($e,{className:"grid w-[200px] grid-cols-2",children:[e.jsxs(O,{value:"tags",children:[e.jsx(_e,{size:14,className:"mr-1.5"}),"Tags"]}),e.jsxs(O,{value:"hashtags",children:[e.jsx(Ae,{size:14,className:"mr-1.5"}),"Hashtags"]})]})}),e.jsxs($,{value:"tags",className:"space-y-3 mt-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2 min-h-[36px] p-1 border rounded-md",children:a.length>0?a.map((o,v)=>e.jsxs(Me,{variant:"secondary",className:"text-xs py-1.5 pl-2 pr-1 gap-1 items-center",children:[e.jsxs("span",{className:"font-semibold",children:[o.name,":"]})," ",o.value,e.jsx(A,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 rounded-full hover:bg-destructive/20",onClick:()=>I(o),children:e.jsx(ze,{size:10})})]},v)):e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center px-1.5",children:[e.jsx(_e,{size:12,className:"mr-1.5"}),"No tags added yet"]})}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsxs("div",{className:"flex-grow space-y-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(_,{value:h,onChange:o=>E(o.target.value),placeholder:"Tag name",className:"text-sm"})}),e.jsx("div",{className:"flex-1",children:e.jsx(_,{value:p,onChange:o=>B(o.target.value),placeholder:"Tag value",className:"text-sm"})})]}),y&&w==="tags"&&e.jsx("p",{className:"text-xs text-destructive",children:y})]}),e.jsxs(A,{type:"button",size:"sm",onClick:R,variant:"outline",className:me("flex-shrink-0 mt-0",y&&w==="tags"&&"mt-0"),children:[e.jsx(ge,{size:16,className:"mr-1"})," Add"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add custom tags to describe this badge (e.g., category, level, etc.)"})]}),e.jsxs($,{value:"hashtags",className:"space-y-3 mt-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2 min-h-[36px] p-1 border rounded-md",children:l.length>0?l.map((o,v)=>e.jsxs(Me,{variant:"secondary",className:"text-xs py-1.5 px-2 gap-1 items-center",children:["#",o,e.jsx(A,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 rounded-full hover:bg-destructive/20 ml-1",onClick:()=>T(o),children:e.jsx(ze,{size:10})})]},v)):e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center px-1.5",children:[e.jsx(Ae,{size:12,className:"mr-1.5"}),"No hashtags added yet"]})}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsxs("div",{className:"flex-grow space-y-1",children:[e.jsx(_,{value:k,onChange:o=>P(o.target.value),placeholder:"Enter hashtag (e.g., nostr, badge)",className:"text-sm"}),y&&w==="hashtags"&&e.jsx("p",{className:"text-xs text-destructive",children:y})]}),e.jsxs(A,{type:"button",size:"sm",onClick:z,variant:"outline",className:"flex-shrink-0",children:[e.jsx(ge,{size:16,className:"mr-1"})," Add"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add hashtags to categorize this badge for better discoverability"})]})]})})},Fe=30008,He="profile_badges",Fs=()=>{const{ndk:a}=vs(),{activeUser:m}=bs(),{toast:l}=js(),[C,h]=i.useState(!1),[E]=i.useState(()=>{const s=localStorage.getItem("nostr-relays");return s?JSON.parse(s):["wss://nos.lol","wss://relay.primal.net","wss://relay.nostr.band","wss://discovery-eu.nostria.app"]}),[p,B]=i.useState(null),[k,P]=i.useState(null),[y,f]=i.useState(!1),[w,D]=i.useState(""),[R,I]=i.useState(!1),[z,T]=i.useState(!1),[o,v]=i.useState({}),[H,he]=i.useState([]),[K,fe]=i.useState([]),c=m==null?void 0:m.pubkey,[xe,Y]=i.useState([]),[Je,W]=i.useState(!0),[ve,X]=i.useState([]),[Qe,J]=i.useState(!0),[be,je]=i.useState([]),[Ze,Q]=i.useState(!0),[Z,V]=i.useState(null),[es,ee]=i.useState(!0),[ye,ss]=i.useState([]),[U,ts]=i.useState([]),[we,as]=i.useState([]),[L,is]=i.useState({}),[ns,Ne]=i.useState(!1),se=i.useMemo(()=>{const s=new Map;if(!Z)return s;const t=Z.tags;for(let n=0;n<t.length-1;n++)if(t[n][0]==="a"&&t[n+1][0]==="e"&&t[n][1]&&t[n+1][1]){const r=t[n][1],b=t[n+1][1];s.set(b,r),n++}return s},[Z]),rs=i.useMemo(()=>{const s={};return U.forEach(t=>{t.definitionEventId&&(s[t.definitionEventId]=(s[t.definitionEventId]||0)+1)}),s},[U]);i.useEffect(()=>{if(!a||!c){W(!1),Y([]);return}W(!0);const s={kinds:[M.BadgeDefinition],authors:[c]},t=a.subscribe(s,{closeOnEose:!0}),n=[];return t.on("event",r=>{n.push(r)}),t.on("eose",()=>{Y(n),W(!1)}),()=>{t.stop()}},[a,c]),i.useEffect(()=>{if(!a||!c){J(!1),X([]);return}J(!0);const s={kinds:[M.BadgeAward],authors:[c]},t=a.subscribe(s,{closeOnEose:!0}),n=[];return t.on("event",r=>{n.push(r)}),t.on("eose",()=>{X(n),J(!1)}),()=>{t.stop()}},[a,c]),i.useEffect(()=>{if(!a||!c){Q(!1),je([]);return}Q(!0);const s={kinds:[M.BadgeAward],"#p":[c]},t=a.subscribe(s,{closeOnEose:!0}),n=[];return t.on("event",r=>{n.push(r)}),t.on("eose",()=>{je(n),Q(!1)}),()=>{t.stop()}},[a,c]),i.useEffect(()=>{if(!a||!c){ee(!1),V(null);return}ee(!0);const s={kinds:[Fe],authors:[c],"#d":[He],limit:1};let t=null;const n=a.subscribe(s,{closeOnEose:!1});return n.on("event",r=>{(!t||r.created_at>t.created_at)&&(t=r,V(t))}),n.on("eose",()=>{t||V(null),ee(!1)}),()=>{n.stop()}},[a,c]),i.useEffect(()=>{const s=(xe??[]).map(Pe).filter(t=>t!==null).sort((t,n)=>(n.event.created_at??0)-(t.event.created_at??0));ss(s)},[xe]),i.useEffect(()=>{const s=async(t,n,r)=>{const b=(t??[]).map(ks).filter(d=>d!==null),g=new Set;if(b.forEach(d=>{d.definitionEventId&&!r[d.definitionEventId]&&g.add(d.definitionEventId)}),g.size>0&&a){Ne(!0);try{const d=Array.from(g).map(S=>{const[j,x,q]=S.split(":");return{kinds:[parseInt(j)],authors:[x],"#d":[q],limit:1}}),u=await a.fetchEvents(d),N={};u.forEach(S=>{const j=Pe(S);if(j){const x=`${M.BadgeDefinition}:${j.pubkey}:${j.d}`;N[x]=j}}),is(S=>({...S,...N}))}catch(d){console.error("Error fetching badge definitions for awards:",d)}finally{Ne(!1)}}n(b.sort((d,u)=>u.awardedAt-d.awardedAt))};s(ve,ts,L),s(be,as,L)},[ve,be,a,L]);const os=i.useCallback(async s=>{if(s.preventDefault(),!a||!c)return;I(!0);const t=new FormData(s.currentTarget),n=t.get("name"),r=t.get("description"),b=t.get("image"),g=t.get("thumb"),d=t.get("uniqueId");if(!n||!d){l({title:"Missing Required Fields",description:"Name and Unique ID are required for a badge type.",variant:"destructive"}),I(!1);return}try{const u=new ue(a);u.kind=M.BadgeDefinition,u.pubkey=c,u.created_at=Math.floor(Date.now()/1e3),u.content=r||"";const N=[["d",d],["name",n]];r&&N.push(["description",r]),b&&N.push(["image",b]),g&&N.push(["thumb",g]),H.forEach(x=>{N.push(["t",x.name,x.value])}),K.forEach(x=>{N.push(["t","hashtag",x])}),u.tags=N,await u.sign();const S="wss://discovery-eu.nostria.app";let j;if(E.includes(S))j=await u.publish();else{const x=[...E,S],q=new pe(new Set(x.map(ps=>a.pool.getRelay(ps))),a);j=await u.publish(q)}if(j.size>0)l({title:"Badge Created",description:`Published to ${j.size} relays.`}),h(!1),Y(x=>[...x,u]),he([]),fe([]);else throw new Error("Failed to publish badge type definition to any relay.")}catch(u){console.error("Failed to create badge type definition:",u),l({title:"Error Creating Badge",description:u.message||"Please try again.",variant:"destructive"})}finally{I(!1)}},[a,c,l,H,K]),[ls,te]=i.useState(!1),ds=s=>{B(s),D(""),te(!0)},Ee=s=>{P(s),f(!0)},cs=i.useCallback(async()=>{if(!a||!c||!p||!w)return;let s;try{const t=Cs.decode(w);if(t.type!=="npub")throw new Error("Invalid npub format.");s=t.data}catch(t){l({title:"Invalid Recipient",description:`Please enter a valid npub. ${t.message}`,variant:"destructive"});return}T(!0);try{const t=new ue(a);t.kind=M.BadgeAward,t.pubkey=c,t.created_at=Math.floor(Date.now()/1e3),t.content="";const r=[["a",`${M.BadgeDefinition}:${p.pubkey}:${p.d}`,"wss://discovery-eu.nostria.app"],["p",s]];p!=null&&p.tags&&p.tags.forEach(d=>{r.push(["t",d.name,d.value])}),t.tags=r,await t.sign();const b="wss://discovery-eu.nostria.app";let g;if(E.includes(b))g=await t.publish();else{const d=[...E,b],u=new pe(new Set(d.map(N=>a.pool.getRelay(N))),a);g=await t.publish(u)}if(g.size>0)l({title:"Badge Given!",description:`Published to ${g.size} relays.`}),te(!1),X(d=>[...d,t]);else throw new Error("Failed to publish badge award to any relay.")}catch(t){console.error("Failed to give badge:",t),l({title:"Error Giving Badge",description:t.message||"Please try again.",variant:"destructive"})}finally{T(!1)}},[a,c,p,w,l]),us=i.useCallback(async s=>{if(!a||!c||!(s!=null&&s.id)||!s.definitionEventId)return;const t=s.id,n=s.definitionEventId;v(r=>({...r,[t]:!0}));try{const r=new Map(se),b=r.has(t);let g;b?(g=new Map(r),g.delete(t),l({title:"Hiding Badge...",description:"Updating profile badges list..."})):(g=new Map(r),g.set(t,n),l({title:"Making Badge Visible...",description:"Updating profile badges list..."}));const d=new ue(a);d.kind=Fe,d.pubkey=c,d.created_at=Math.floor(Date.now()/1e3),d.content="";const u=[["d",He]];g.forEach((j,x)=>{u.push(["a",j]),u.push(["e",x])}),d.tags=u,await d.sign();const N="wss://discovery-eu.nostria.app";let S;if(E.includes(N))S=await d.publish();else{const j=[...E,N],x=new pe(new Set(j.map(q=>a.pool.getRelay(q))),a);S=await d.publish(x)}if(S.size>0)l({title:b?"Badge Hidden":"Badge Visible",description:"Your profile badges list has been updated."}),V(d);else throw new Error("Failed to publish profile badges list update to any relay.")}catch(r){console.error("Failed to update badge visibility:",r),l({title:"Error Updating Visibility",description:r.message||"Please try again.",variant:"destructive"})}finally{v(r=>({...r,[t]:!1}))}},[a,c,l,se]),ae=Je||Qe||Ze||es||ns;if(!c)return e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Please log in to manage your badges."});const ie=()=>e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsx(Ss,{})});return e.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Badges"}),e.jsxs(Se,{open:C,onOpenChange:h,children:[e.jsx(ys,{asChild:!0,children:e.jsxs(A,{children:[e.jsx(ge,{className:"w-4 h-4 mr-2"})," Create Badge"]})}),e.jsxs(Ce,{className:"sm:max-w-[500px]",children:[e.jsxs(Be,{children:[e.jsx(ke,{children:"Create New Badge"}),e.jsx(De,{children:"Define a new type of badge that you can give to others."})]}),e.jsxs("form",{onSubmit:os,className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"uniqueId",children:"Unique ID (d tag) *"}),e.jsx(_,{id:"uniqueId",name:"uniqueId",required:!0,placeholder:"e.g., awesome-developer-award-2025",className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"A unique identifier for this badge type (required)."})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"name",children:"Name *"}),e.jsx(_,{id:"name",name:"name",required:!0,placeholder:"e.g., Awesome Developer",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"description",children:"Description"}),e.jsx(Ds,{id:"description",name:"description",placeholder:"e.g., Awarded for significant contributions...",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"image",children:"Image URL"}),e.jsx(_,{id:"image",name:"image",type:"url",placeholder:"https://example.com/badge.png",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"thumb",children:"Thumbnail URL"}),e.jsx(_,{id:"thumb",name:"thumb",type:"url",placeholder:"https://example.com/badge_thumb.png",className:"mt-1"})]}),e.jsx(zs,{tags:H,onChange:he,hashtags:K,onHashtagsChange:fe}),e.jsx(Ie,{children:e.jsxs(A,{type:"submit",disabled:R,children:[R&&e.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Badge"]})})]})]})]})]}),e.jsx(Bs,{open:y,onOpenChange:f,definition:k||void 0,perspective:"none"}),e.jsxs(Oe,{defaultValue:"received",className:"w-full",children:[e.jsxs($e,{className:"grid w-full grid-cols-3",children:[e.jsx(O,{value:"received",children:"Received"}),e.jsx(O,{value:"given",children:"Given"}),e.jsx(O,{value:"definitions",children:"My Badges"})]}),e.jsx($,{value:"received",className:"mt-6",children:e.jsxs(re,{children:[e.jsxs(oe,{children:[e.jsx(le,{children:"Received Badges"}),e.jsx(de,{children:"Badges you have received. Toggle visibility for your public profile."})]}),e.jsx(ce,{className:"space-y-4",children:ae?ie():we.length>0?we.map(s=>{const t=se.has(s.id),n=o[s.id]??!1;return e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-3 border border-border rounded-lg bg-card",children:[e.jsx("div",{className:"flex-grow w-full sm:w-auto",children:e.jsx(Re,{award:s,perspective:"recipient",definition:L[s.definitionEventId||""]})}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 pl-0 sm:pl-4 pt-2 sm:pt-0 border-t sm:border-t-0 sm:border-l border-border w-full sm:w-auto justify-end sm:justify-start",children:[e.jsx(F,{htmlFor:`visibility-toggle-${s.id}`,className:"text-xs text-muted-foreground cursor-pointer select-none",children:t?"Visible":"Hidden"}),e.jsx(Xe,{id:`visibility-toggle-${s.id}`,checked:t,onCheckedChange:()=>us(s),disabled:n||!s.definitionEventId,"aria-label":"Toggle badge visibility"}),n&&e.jsx(ne,{className:"h-4 w-4 animate-spin text-muted-foreground"})]})]},s.id)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"You haven't received any badges yet."})})]})}),e.jsx($,{value:"given",className:"mt-6",children:e.jsxs(re,{children:[e.jsxs(oe,{children:[e.jsx(le,{children:"Given Badges"}),e.jsx(de,{children:"Badges you have given to others."})]}),e.jsx(ce,{className:"space-y-4",children:ae?ie():U.length>0?U.map(s=>e.jsx(Re,{award:s,perspective:"awarder",definition:L[s.definitionEventId||""]},s.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"You haven't given any badges yet."})})]})}),e.jsx($,{value:"definitions",className:"mt-6",children:e.jsxs(re,{children:[e.jsxs(oe,{children:[e.jsx(le,{children:"My Badges"}),e.jsx(de,{children:"Badge types you have created and can give."})]}),e.jsx(ce,{className:"space-y-4",children:ae?ie():ye.length>0?ye.map(s=>{const t=`${M.BadgeDefinition}:${s.pubkey}:${s.d}`,n=rs[t]||0;return e.jsxs("div",{className:"p-4 border border-border rounded-lg flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 bg-card",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-grow cursor-pointer",onClick:()=>Ee(s),children:[(s.thumb||s.image)&&e.jsxs(ws,{className:"w-12 h-12 hidden sm:flex flex-shrink-0",children:[e.jsx(Ns,{src:s.thumb||s.image,alt:s.name}),e.jsx(Es,{children:e.jsx(Te,{className:"w-6 h-6 text-muted-foreground"})})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-base",children:s.name}),e.jsx(A,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full hover:bg-muted",onClick:r=>{r.stopPropagation(),Ee(s)},children:e.jsx(Is,{size:14})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.tags.slice(0,3).map((r,b)=>e.jsxs("span",{className:"text-xs px-1.5 py-0.5 bg-muted rounded-md text-muted-foreground",children:[r.name,": ",r.value]},b)),s.tags.length>3&&e.jsxs("span",{className:"text-xs px-1.5 py-0.5 bg-muted rounded-md text-muted-foreground",children:["+",s.tags.length-3," more"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-start sm:items-end gap-2 flex-shrink-0 w-full sm:w-auto pt-2 sm:pt-0 border-t sm:border-t-0 sm:border-l-0 border-border",children:[e.jsxs(A,{size:"sm",onClick:r=>{r.stopPropagation(),ds(s)},children:[e.jsx(Te,{className:"w-3 h-3 mr-1.5"})," Give Badge"]}),e.jsxs("span",{className:"text-xs text-muted-foreground pt-1 sm:pt-0",children:["Given ",n," time",n!==1?"s":""]})]})]},s.id)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"You haven't created any badge types yet."})})]})})]}),e.jsx(Se,{open:ls,onOpenChange:te,children:e.jsxs(Ce,{className:"sm:max-w-[425px]",children:[e.jsxs(Be,{children:[e.jsxs(ke,{children:["Give Badge: ",p==null?void 0:p.name]}),e.jsx(De,{children:"Enter the npub of the user you want to give this badge to."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(F,{htmlFor:"recipient-npub",className:"text-right",children:"Recipient npub"}),e.jsx(_,{id:"recipient-npub",value:w,onChange:s=>D(s.target.value),className:"col-span-3",placeholder:"npub1..."})]})}),e.jsx(Ie,{children:e.jsxs(A,{onClick:cs,disabled:z,children:[z&&e.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Give Badge"]})})]})})]})},Xs=()=>e.jsx(Fs,{});export{Xs as BadgesPage};

import{u as p,a as f,j as e,D as g,b as v,B as c,c as N,d as w,e as u,S as y}from"./index-BETSscnm.js";import{r as d}from"./react-stuff-BXf_FtOc.js";import"./nostr-dev-kit-Ci8rOtvv.js";import{N as M,a as b}from"./index-zd-tPDC5.js";import{u as k}from"./index-B2P0rHuA.js";import"./zustand-B-hWnPoZ.js";import"./textarea-Wl9G6xb5.js";import"./scroll-area-C4yQe26l.js";import"./x-QsXYDViR.js";import"./index-0SbEOFyM.js";const D=()=>{const[o,l]=d.useState("Notes"),{activeUser:s}=p(),{follows:t}=k({pubkey:s==null?void 0:s.pubkey}),i=s?`notes-feed-${s.pubkey}`:void 0,{createSubscription:n,events:r,loadMore:m,hasMore:h,isLoading:x}=f(i),j=d.useMemo(()=>r==null?void 0:r.filter(a=>o==="Notes"?a.getMatchingTags("e").length==0:o==="Replies"?a.getMatchingTags("e").length>0:!0).reverse(),[r,o]);return d.useEffect(()=>{!s||t===void 0||n({filters:[{kinds:[1],limit:10,authors:[s.pubkey,...(t||[]).map(a=>a.pubkey)]}],opts:{groupableDelay:500}})},[n,t,s]),{processedEvents:j,loadMore:m,hasMore:h,isLoading:x,setView:l,view:o}},R=()=>{const{processedEvents:o,hasMore:l,loadMore:s,setView:t,view:i,isLoading:n}=D();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[e.jsx("div",{className:"py-2",children:e.jsx(M,{})}),e.jsx("div",{className:"px-2",children:e.jsx("div",{className:"p-2 border rounded-sm shadow-md",children:e.jsxs(g,{children:[e.jsx(v,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:i==="Notes"?"Notes":"Replies"})}),e.jsx(N,{align:"start",children:e.jsxs(w,{value:i,onValueChange:r=>t(r),children:[e.jsx(u,{value:"Notes",children:"Notes"}),e.jsx(u,{value:"Replies",children:"Replies"})]})})]})})}),n?e.jsx(y,{}):o?e.jsx("div",{className:"pt-2 flex flex-col gap-2",children:o.map(r=>e.jsx(b,{event:r},r.id))}):e.jsx("div",{className:"pt-2 px-2",children:e.jsx("p",{children:"No events found. Follow some users to see their notes here."})}),l&&e.jsx("div",{className:"py-4 flex justify-center",children:e.jsx(c,{variant:"secondary",onClick:()=>s(100),className:"w-full",children:"Load more"})})]})})},P=()=>{const{activeUser:o}=p();return e.jsx(e.Fragment,{children:o?e.jsx(R,{}):e.jsxs("div",{className:"flex flex-col h-full w-full items-center justify-center",children:[e.jsx("h3",{children:"Welcome to Nostr Platform!"}),e.jsx("p",{children:"Log-in to view and create notes"})]})})};export{P as HomePage};
